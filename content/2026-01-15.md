---
title: "2026-01-15_再次搬家到 Obsidian+Quartz技术备忘录"
date: 2026-01-15
tags:
  - 
---
今天上班又一顿折腾，把 Gridea 升级到了 Obsidian+Quartz
好处是更稳定，更持久
这是记录：

这份总结涵盖了从环境搭建、自动化脚本配置到日常写作流的全过程。建议将此内容保存在你的 Obsidian 中作为“技术备忘录”。

### 1. 核心架构与原理

- **本地端**：使用 Obsidian 编辑 Markdown 文件（位于 `content` 文件夹）。
    
- **引擎端**：Quartz v4（基于 Node.js）负责将 Markdown 编译为静态网页。
    
- **云端**：GitHub 托管代码，通过 GitHub Actions 自动构建并部署到 GitHub Pages。
    

---

### 2. 关键的一次性配置 (Setup)

#### A. GitHub 仓库设置

1. **权限**：在仓库 Settings -> Pages -> Build and deployment -> Source 中，必须选择 **GitHub Actions**（而非 Deploy from a branch）。
    
2. **流水线**：在 `.github/workflows/` 下创建了 `deploy.yml`，定义了构建和发布指令。
    

#### B. 博客个性化 (`quartz-blog` 根目录)

1. **基本信息**：修改 `quartz.config.ts`。
    
    - `pageTitle`: 修改博客名称。
        
    - `locale`: 改为 `"zh-CN"` (汉化阅读时间等)。
        
    - `ignorePatterns`: 添加了 `Templates` (防止模板文件被发布)。
        
2. **左侧列表排序**：修改 `quartz.layout.ts`。
    
    - 在 `Component.Explorer` 中增加了 `sortFn` 函数。
        
    - 逻辑：优先读取 YAML 中的 `date` 字段，按日期**倒序**排列（最新的在最上面）。
        

#### C. 网络与发布自动化

解决了国内 GitHub 连接不稳及代理端口问题。

- **配置文件**：`~/.zshrc`
    
- **自定义命令**：`qsync`
    
- **逻辑**：自动检测本地 7890 端口（ClashX）。如果有代理，自动配置 Git 代理环境变量；如果没有，则直连。最后执行 `npx quartz sync`。
    

---

### 3. Obsidian 写作配置

#### A. 模板设置

- **位置**：创建了 `content/Templates` 文件夹（并在 Config 中设置忽略）。
    
- **模板内容**：
    
    YAML
    
    ```
    ---
    title: "{{title}}"
    date: {{date}}
    tags:
      - 
    ---
    ```
    
- **注意**：YAML 中的冒号后如有文本，且包含特殊字符，必须使用**英文半角双引号**包裹。
    

#### B. 文件名与标题逻辑

- **文件名 (Filename)**：建议使用纯日期（如 `2026-01-15.md`）。
    
    - 作用：保证 URL 稳定，保证本地文件排序整齐。
        
- **文章标题 (YAML Title)**：可以在日期后任意添加文字。
    
    - 作用：网页端显示的大标题。
        
    - 示例：`title: "2026-01-15: 我的第一篇博客"`
        

---

### 4. 日常操作流程 (SOP)

**第一步：新建**

- 打开 Obsidian，点击“日记”图标（或新建笔记并插入模板）。
    
- 此时 YAML 区域会自动生成 `date` 和基础 `title`。
    

**第二步：写作**

- 修改 `title` 为你想要的标题（注意英文引号）。
    
- 添加 `tags`。
    
- 撰写正文。
    

**第三步：发布**

- 打开终端（Terminal）。
    
- 输入命令：
    
    Bash
    
    ```
    qsync
    ```
    
- 等待脚本显示 `Done`，且 GitHub Actions 变绿（约 1 分钟），网站即更新。
    

---

### 5. 常见问题排查

- **发布后没变化**：检查 GitHub Actions 页面是否报错；检查是否忘记改 `qsync` 里的 GitHub Pages source 设置。
    
- **标题显示乱码**：检查 YAML header 里是否用了中文全角引号。
    
- **左侧排序不对**：检查该文章的 YAML 里是否有 `date` 字段。
